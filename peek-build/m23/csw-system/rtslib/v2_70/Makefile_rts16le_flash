DEFINE += 
UNDEFINE += L1

VARIANT_INCLUDE = 
INCLUDE += $(M23_VARIANT_INCLUDE)
INCLUDE += $(M23DIR)/csw-system/rtslib/v2_70

SRC  = acos.c
SRC += atan2.c
SRC += asin.c
SRC += abs.c
SRC += cosh.c
SRC += cos.c
SRC += exp.c
SRC += sin.c
SRC += sinh.c
SRC += tan.c
SRC += tanh.c
SRC += ldexp.c
SRC += rand.c
SRC += sqrt.c
SRC += atan.c
SRC += frexp.c
SRC += fmod.c
SRC += floor.c
SRC += div.c
SRC += fabs.c
SRC += pow.c
SRC += log.c
SRC += log10.c
SRC += ceil.c
SRC += modf.c
SRC += atol.c
SRC += atoi.c
SRC += ltoa.c
SRC += strtol.c
SRC += strtod.c
SRC += toupper.c
SRC += tolower.c 
SRC += ecvt.c
SRC += fcvt.c
SRC += ctype.c
SRC += toascii.c
SRC += atof.c
SRC += strtoul.c
SRC += clock.c
SRC += time.c 
SRC += mktime.c
SRC += difftime.c
SRC += asctime.c 
SRC += gmtime.c
SRC += localtim.c
SRC += strftime.c
SRC += isalnum.c
SRC += isalpha.c
SRC += isascii.c 
SRC += iscntrl.c
SRC += isdigit.c
SRC += isgraph.c
SRC += islower.c
SRC += isprint.c 
SRC += ispunct.c
SRC += isspace.c
SRC += isupper.c
SRC += isxdigit.c
SRC += _scanfi.c 
SRC += sscanf.c
SRC += fopen.c 
SRC += fprintf.c
SRC += fputc.c 
SRC += fputs.c 
SRC += fread.c 
SRC += fscanf.c
SRC += fseek.c 
SRC += fsetpos.c 
SRC += fgetc.c 
SRC += fgetpos.c
SRC += fgets.c 
SRC += fflush.c 
SRC += ftell.c 
SRC += fwrite.c 
SRC += feof.c 
SRC += ferror.c 
SRC += ungetc.c
SRC += tmpfile.c
SRC += tmpnam.c
SRC += fclose.c
SRC += rewind.c
SRC += setbuf.c
SRC += setvbuf.c
SRC += _io_perm.c 
SRC += remove.c 
SRC += vfprintf.c 
SRC += lowlev.c
SRC += trgdrv.c 
SRC += trgmsg.c
SRC += clearerr.c
SRC += exit.c
SRC += assert.c
SRC += defs.c
SRC += errno.c
SRC += vprintf.c
SRC += printf.c 
SRC += perror.c 
SRC += memcpy.c
SRC += _log.c 
SRC += tmzone.c
SRC += _bufread.c
SRC += qsort.c 
SRC += bsearch.c
SRC += strcspn.c 
SRC += strspn.c
SRC += strpbrk.c
SRC += strcmp.c
SRC += strncmp.c
SRC += strstr.c
SRC += strchr.c
SRC += strrchr.c 
SRC += strcoll.c
SRC += strerror.c
SRC += strtok.c 
SRC += strxfrm.c
SRC += atoll.c
SRC += lldiv.c
SRC += snprintf.c 
SRC += strtold.c
SRC += strtoll.c
SRC += strtoull.c 
SRC += vsnprintf.c
SRC += stkdepth.c
SRC += stkdepth_vars.c
SRC += _lock.c
SRC += sinit.c
SRC += ctime_.c
SRC += new_.cpp
SRC += new_af.cpp
SRC += new_afn.cpp
SRC += new_afp.cpp 
SRC += new_sof.cpp 
SRC += new_sofn.cpp 
SRC += new_sofp.cpp 
SRC += purev.cpp 
SRC += rtti.cpp
SRC += typeinfo_.cpp 
SRC += array.cpp
SRC += del_af.cpp 
SRC += del_afn.cpp 
SRC += del_afp.cpp
SRC += del_sof.cpp
SRC += del_sofn.cpp 
SRC += del_sofp.cpp
SRC += fs_add32.asm
SRC += fs_cmp32.asm 
SRC += fs_div32.asm
SRC += fs_mul32.asm
SRC += fs_toi32.asm 
SRC += fs_tou32.asm 
SRC += fs_tod32.asm 
SRC += fs_add16.asm 
SRC += fs_cmp16.asm 
SRC += fs_div16.asm
SRC += fs_mul16.asm
SRC += fs_toi16.asm
SRC += fs_tou16.asm 
SRC += fs_tod16.asm 
SRC += fd_add32.asm 
SRC += fd_cmp32.asm 
SRC += fd_div32.asm
SRC += fd_mul32.asm 
SRC += fd_toi32.asm 
SRC += fd_tou32.asm
SRC += fd_tos32.asm 
SRC += fd_add16.asm 
SRC += fd_cmp16.asm 
SRC += fd_div16.asm 
SRC += fd_mul16.asm 
SRC += fd_toi16.asm 
SRC += fd_tou16.asm
SRC += fd_tos16.asm 
SRC += u_tofd16.asm
SRC += u_tofd32.asm 
SRC += u_tofs16.asm
SRC += u_tofs32.asm
SRC += i_tofd16.asm
SRC += i_tofd32.asm 
SRC += i_tofs16.asm 
SRC += i_tofs32.asm 
SRC += fd_toll16.asm 
SRC += fd_toll32.asm
SRC += fd_toull16.asm
SRC += fd_toull32.asm
SRC += fs_toll16.asm 
SRC += fs_toll32.asm 
SRC += fs_toull16.asm 
SRC += fs_toull32.asm 
SRC += ll_asr16.asm 
SRC += ll_asr32.asm
SRC += ll_div16.asm
SRC += ll_div32.asm 
SRC += ll_lsl16.asm 
SRC += ll_lsl32.asm 
SRC += ll_lsr16.asm 
SRC += ll_lsr32.asm 
SRC += ll_mul16.asm 
SRC += ll_tofd16.asm
SRC += ll_tofd32.asm 
SRC += ll_tofs16.asm 
SRC += ll_tofs32.asm
SRC += ull_div16.asm 
SRC += ull_div32.asm 
SRC += ull_tofd16.asm 
SRC += ull_tofd32.asm
SRC += ull_tofs16.asm
SRC += ull_tofs32.asm
SRC += stkchk16.asm 
SRC += stkchk32.asm

OBJ = $(addprefix $(CURDIR)/,$(patsubst %.c,%.o,$(patsubst %.cpp,%.o,$(patsubst %.asm,%.o,$(SRC)))))
DEPS = $(patsubst %.o,%.d,$(OBJ))

TARGET = $(CURDIR)/rts16le_flash.a

all: $(TARGET)

$(TARGET): $(OBJ)
	$(AR) $(ARFLAGS) $@ $?

clean:
	$(RM) $(OBJ) 
	$(RM) $(TARGET) 
	$(RM) $(DEPS)
	$(RM) $(patsubst %.o,%.pp,$(OBJ))
	$(RM) $(patsubst %.o,%.pp_,$(OBJ))

include $(BASEDIR)/Makefile.rules
